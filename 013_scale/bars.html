<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>d3.js</title>
    <script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.js"></script>
</head>
<body>

<div id="output">
</div>

<script>

var data = [
    { key: 1, value: 4},
    { key: 2, value: 5},
    { key: 3, value: 6},
    { key: 4, value: 3},
    { key: 5, value: 2},
    { key: 6, value: 7},
    { key: 7, value: 5},
    { key: 8, value: 6},
    { key: 9, value: 7},
    { key: 10, value: 3}
];

var w = 300;
var h = 100;

var svg = d3.select("#output")
            .append("svg")
            .attr("width", w)
            .attr("height", h)
            .style("background-color", "#eeeeee");

//svg.selectAll("rect")
//        .data(data)
//        .enter()
//        .append("rect")
//        .attr("x", function(d){ return d.key * 11; })
//        .attr("y", function(d){ return h - d.value * 10; })
//        .attr("width", 10)
//        .attr("height", function(d){ return d.value * 10 })
//        .attr("fill", "gray")

//var xMin = d3.min(data, function(d){ return d.key; });
//var xMax = d3.max(data, function(d){ return d.key; });
//var xWidth = w / data.length;
//console.log("xWidth", xWidth);
//
//var yMin = 0;
//var yMax = d3.max(data, function(d){ return d.value; });
//
//svg.selectAll("rect")
//        .data(data)
//        .enter()
//        .append("rect")
//        .attr("x", function(d){ return (d.key - 1) * xWidth ; })
//        .attr("y", function(d){ return h - ( d.value / yMax ) * h; })
//        .attr("width", xWidth - 2)
//        .attr("height", function(d){ return ( d.value / yMax ) * h })
//        .attr("fill", "gray");


var xMin = d3.min(data, function(d){ return d.key; });
var xMax = d3.max(data, function(d){ return d.key; });
var xWidth = w / data.length;
var xScale = d3.scale.linear()
        .domain([xMin, xMax])
        .range([0, w - xWidth]);

var yMin = 0;
var yMax = d3.max(data, function(d){ return d.value; });
var yScale = d3.scale.linear()
        .domain([yMin, yMax])
        .range([0, h]);

svg.selectAll("rect")
        .data(data)
        .enter()
        .append("rect")
        .attr("x", function(d){ return xScale(d.key) ; })
        .attr("y", function(d){ return h - yScale(d.value); })
        .attr("width", xWidth - 2)
        .attr("height", function(d){ return yScale(d.value) })
        .attr("fill", "gray");


</script>


</body>
</html>